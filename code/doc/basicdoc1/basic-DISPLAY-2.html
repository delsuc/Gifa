<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=iso-8859-1">
	<TITLE>DISPLAY AND GRAPHIC INTERACTION</TITLE>
	<META NAME="GENERATOR" CONTENT="StarOffice/5.2 (Linux)">
	<META NAME="CREATED" CONTENT="20010412;18555100">
	<META NAME="CHANGEDBY" CONTENT="Thierry Gostan">
	<META NAME="CHANGED" CONTENT="20010412;18571200">
	<!-- This document was converted from RTF source: 
By r2net 5.2.4 r2netcmd Unix 
Translation:html.trn  $Revision: 1.55 $ $Revision: 1.34 $
See http://www.logictran.com
Filename:basic.rtf
OutFileName:basic.html
Application Directory:/home/gostan/r2net
Subject:
Author:
Operator:
Document Comments:
Version Comments:
Comments:StarWriter
Keywords:
Translation Date:04/12/2001
Translation Time:15:05:51
Translation Platform:Unix
Number of Output files:50
This File:basic-DISPLAY-2.html
SplitDepth=2
SkipNavPanel=0
SkipLeadingToc=0
SkipTrailingToc=1
GenContents=1
GenFrames=1
GenIndex=0
 -->
	<STYLE>
	<!--
		A:visited { color: #808080 }
		A:link { color: #cc0000 }
	-->
	</STYLE>
</HEAD>
<BODY LINK="#cc0000" VLINK="#808080" BGCOLOR="#ffffff">
<P ALIGN=CENTER STYLE="margin-bottom: 0cm"><A HREF="basic-SPECTRAL.html"><IMG SRC="images/prev.gif" NAME="Image1" ALT="Previous " ALIGN=BOTTOM WIDTH=30 HEIGHT=29 BORDER=0></A> 
  <A HREF="basic-PLOTTING.html"><IMG SRC="images/next.gif" NAME="Image2" ALT="Next " ALIGN=BOTTOM WIDTH=30 HEIGHT=29 BORDER=0></A> 
  <A HREF="basic-Title.html"><IMG SRC="images/first.gif" NAME="Image3" ALT="Title Page " ALIGN=BOTTOM WIDTH=30 HEIGHT=29 BORDER=0></A> 
  <A HREF="basic-Contents.html"><IMG SRC="images/contents.gif" NAME="Image4" ALT="Contents " ALIGN=BOTTOM WIDTH=30 HEIGHT=29 BORDER=0></A> 
</P>
<HR>
<UL>
	<LI><P STYLE="margin-bottom: 0cm"><A HREF="basic-DISPLAY-2.html#Heading1111">DISP1D,
	DISP2D</A> 
	</P>
	<LI><P STYLE="margin-bottom: 0cm"><A HREF="basic-DISPLAY-2.html#Heading1118">SCALE,
	ITYPE, ABSMAX, SIGN, VHEIGHT, CLEAR</A> 
	</P>
	<LI><P STYLE="margin-bottom: 0cm"><A HREF="basic-DISPLAY-2.html#Heading1128">CDISP2D,
	LEVEL, LOGA, CCOLOR</A> 
	</P>
	<LI><P STYLE="margin-bottom: 0cm"><A HREF="basic-DISPLAY-2.html#Heading1137">AXIS</A>
		</P>
	<LI><P STYLE="margin-bottom: 0cm"><A HREF="basic-DISPLAY-2.html#Heading1139">COLOR,
	SCOLOR, Choice of Colours </A>
	</P>
	<LI><P STYLE="margin-bottom: 0cm"><A HREF="basic-DISPLAY-2.html#Heading1143">COLOR,
	SCOLOR, Choice of Colours </A>
	</P>
	<LI><P STYLE="margin-bottom: 0cm"><A HREF="basic-DISPLAY-2.html#Heading1146">ZOOM,
	ZM</A> 
	</P>
	<LI><P STYLE="margin-bottom: 0cm"><A HREF="basic-DISPLAY-2.html#Heading1150">The
	Point stack : MONOPOINT, POINT_PUSH, POINT_POP, POINT_CLEAR,
	point_dump, point</A> 
	</P>
	<LI><P STYLE="margin-bottom: 0cm"><A HREF="basic-DISPLAY-2.html#Heading1154">SHOW</A>
		</P>
	<LI><P STYLE="margin-bottom: 0cm"><A HREF="basic-DISPLAY-2.html#Heading1157">FREEZE</A>
		</P>
	<LI><P><A HREF="basic-DISPLAY-2.html#Heading1160">REF, UNREF,
	REFMACRO</A> 
	</P>
</UL>
<HR>
<H1><A NAME="Heading1108"></A><FONT SIZE=4><I><U>DISPLAY AND GRAPHIC
INTERACTION</U></I></FONT></H1>
<P>Display is fully optional in Gifa, when the program starts it
detect whether it is connected to an X-window server or not. If it is
the case, the standard startup macro installs the menu-bar and opens
several default spectral windows. Again these windows can be close at
will, or reopened at any time.</P>
<H3><A NAME="Heading1111"></A><B>DISP1D, DISP2D</B></H3>
<P>When <TT><FONT FACE="Courier">DISP1D</FONT></TT> is one, a 1D
graphic window call &laquo;&#160;1D Spectrum&#160;&raquo; is
displayed on screen, 1D buffer will be displayed in this window . 2D
will be displayed as density colour maps in a square window call &laquo;&#160;2D
window&#160;&raquo; when <TT><FONT FACE="Courier">DISP2D</FONT></TT>
is 1. In 3D mode, planes extracted from the 3D data-sets will be
displayed as 2D. Setting these contexts to 0 actually closes the
associated window.<BR>The size of the created windows with the <TT><FONT FACE="Courier">DISP2D</FONT></TT>
command, is hard-wired and cannot be modified. <BR>The display is
refreshed at only the end of each command line; you can thus avoid
useless display of intermediate computation by putting all the
related commands on one line.<BR>On VWS window manager, the graphics
may sometimes be surrounded by a yellow border (if the sizes are
different from a power of two). <BR>2D are displayed in density mode.
The density mode consists of a colour coding of the value of the
points. 64 colours are used, distributed with a constant interval on
positive and negative values. Values around zero are coded in black. 
</P>
<H3><A NAME="Heading1118"></A><B>SCALE, ITYPE, ABSMAX, SIGN, VHEIGHT,
CLEAR</B></H3>
<P>These contexts characterise the state of the display and the
plotting. <BR>The display is computed at the end of the command line.
Some point may be skipped when displaying large spectra (typically
greater than 4k in 1D, and larger than 512x512 in 2D) but not for
plotting. The vertical size of the display is defined by the <TT><FONT FACE="Courier">SCALE</FONT></TT>
context. The display depends also on the ITYPE value; imaginary
points are not displayed. <BR>The scale is computed such that for<TT><FONT FACE="Courier">
SCALE 1</FONT></TT>, the larger point of the spectrum is full-screen.
In 2D, the lower level displayed will 1/32 the higher level
displayed. The value of this larger point is held in the <TT><FONT FACE="Courier">ABSMAX</FONT></TT>
context. <TT><FONT FACE="Courier">ABSMAX</FONT></TT> is recomputed at
display time whenever the data actually changed, however it is not
recomputed when it is not needed and you can force the computation of
<TT><FONT FACE="Courier">ABSMAX</FONT></TT> by putting its value to
0. The scale being relative, <TT><FONT FACE="Courier">ABSMAX</FONT></TT>
can be modified to compute absolute display and plot by forcing its
value to any pre-defined value. This value will not be overridden as
long as the data are not actually changed. <BR>To make this long
story short, one can say that the point with the value <TT><FONT FACE="Courier">ABSMAX
</FONT></TT>/ <TT><FONT FACE="Courier">SCALE</FONT></TT> will be
displayed full screen. <BR>Absolute display (to compare spectra, or
to set the first level relative to the noise) can be obtained by
forcing <TT><FONT FACE="Courier">ABSMAX</FONT></TT>. See the FAQ at
the end of the manual for more information and examples.<BR><TT><FONT FACE="Courier">SIGN</FONT></TT>
determined, in 2D or 3D whether only positive points, only negative
points or both will displayed. <BR><TT><FONT FACE="Courier">VHEIGHT</FONT></TT>
is the level to which the zero level will be plotted in 1D display.
Unit is in %, 0 will draw at the bottom of the screen/page, 1 at the
top. Standard value is 0.3 (30%). <BR><TT><FONT FACE="Courier">CLEAR</FONT></TT>
context determines if each display will be drawn on the top of the
previous one (0 mode) or if the window will be cleared before drawing
(1 mode - default mode).</P>
<H3><A NAME="Heading1128"></A><B>CDISP2D, LEVEL, LOGA, CCOLOR</B></H3>
<P>A second display mode is available in 2D which is a contour plot
mode that is activated with the command <TT><FONT FACE="Courier">CDISP2D</FONT></TT>.
The size of the <TT><FONT FACE="Courier">CDISP2D</FONT></TT> window
when opened is always 15cm x 15cm. <TT><FONT FACE="Courier">SCALE</FONT></TT>
and <TT><FONT FACE="Courier">SIGN</FONT></TT> are active in this
window as they are in the density window. The number of contour
levels is defined by the <TT><FONT FACE="Courier">LEVEL</FONT></TT>
context; <TT><FONT FACE="Courier">LEVEL</FONT></TT> contours are
displayed in the positive and in the negative part and are equally
spaced between 0 and <TT><FONT FACE="Courier">ABSMAX </FONT></TT>/
<TT><FONT FACE="Courier">SCALE</FONT></TT> in the default mode of
<TT><FONT FACE="Courier">LOGA</FONT></TT> equal to 1. If the context
<TT><FONT FACE="Courier">LOGA</FONT></TT> is set a value larger than
1 then each level is at a position equal to the previous level time
<TT><FONT FACE="Courier">LOGA</FONT></TT>. For instance if with <TT><FONT FACE="Courier">LOGA
1 </FONT></TT>levels are at :<BR>1 2 3 4 5 6 etc...<BR>with <TT><FONT FACE="Courier">LOGA
1.5</FONT></TT> levels will be :<BR>1 1.5 2.25 3.375 5.0625 7.59
etc...<BR><TT><FONT FACE="Courier">LOGA 2</FONT></TT> corresponds to
the BRUKER standard spacing. <BR>When working full spectrum on large
data-set a <TT><FONT FACE="Courier">CDISP2D</FONT></TT> can take too
long, and you may wish to stop the display, you can always do it by
typing a ^C. <BR>Contour plot display are normally in colours, with a
colour code equivalent to the <TT><FONT FACE="Courier">DISP2D</FONT></TT>
mode, however it is possible to switch to a Black and White mode with
the <TT><FONT FACE="Courier">CCOLOR</FONT></TT> context.</P>
<H3><A NAME="Heading1137"></A><B>AXIS</B></H3>
<P>This command determines whether coordinates will be drawn on the
axes of the current display. Coordinates can be selected to be an all
axes, on only one direction, or to be absent. The kind of coordinates
which is displayed is determined by the <TT><FONT FACE="Courier">UNIT</FONT></TT>
command (see previous chapter).</P>
<H3><A NAME="Heading1139"></A><B>COLOR, SCOLOR, Choice of Colours </B>
</H3>
<P>Display are of two kinds : vector mode, used by 1D, 2D contour
mode, 3D and the <TT><FONT FACE="Courier">SHOWxxx</FONT></TT>
commands; or image used by density mode in 2D. In vector mode the
colour used is determined by the <TT><FONT FACE="Courier">COLOR</FONT></TT>
context which default value is white. The current colour can be
chosen separately for each window with the <TT><FONT FACE="Courier">COLOR</FONT></TT>
command. Only 8 colours are available with the <TT><FONT FACE="Courier">COLOR</FONT></TT>
command, they correspond to pure colours when the standard colour
file is used. The context <TT><FONT FACE="Courier">SCOLOR</FONT></TT>
determines the colour used by the <TT><FONT FACE="Courier">SHOW</FONT></TT>
and <TT><FONT FACE="Courier">SHOWxxx</FONT></TT> commands (see
below). <BR>The colour table used by the density mode is built when
starting the program. The presence of a file called <TT><FONT FACE="Courier">.gifacolor</FONT></TT>
is checked first in the working directory, then in the $HOME
directory, then the presence of a file called <TT><FONT FACE="Courier">gifacolor</FONT></TT>
is checked in <TT><FONT FACE="Courier">/usr/local/gifa/com</FONT></TT>.
If one of these file is found, it is used as a list of colours to be
used by the density display. The file has one entry per line, first
the choice of colours for the pointer, then for the density mode,
starting with the large negative value ending with large positive
values. Each entry is of the form HUE - SATURATION - INTENSITY. If no
file is found, a default set up is used. You will find on the
distribution tape a set of small programs that permits to build such
custom colour tables. The standard colour table, as well as a Black &amp;
White colour table are given as example.</P>
<P><A NAME="Heading1143"></A>will generate a psychedelic effect by
rotating the colour tables (on VMS/VWS only). Go ahead and try it,
just for the fun of it!</P>
<H3><A NAME="Heading1146"></A><B>ZOOM, ZM</B></H3>
<P>The <TT><FONT FACE="Courier">ZM</FONT></TT> commands opens a
control box which permits to zoom in and out the data-set, to move
around the zoom window and to rapidly set the <TT><FONT FACE="Courier">SCALE</FONT></TT>
value. To set the zoom window click on the data-set with the left and
middle button of the mouse, and then click on the <TT><U><FONT FACE="Courier">Zoom
In</FONT></U></TT> button (or on the display, with the left and right
button of the mouse). Other controls in th <TT><FONT FACE="Courier">ZM</FONT></TT>
box are very natural. Some times, when using some interactive
commands or macros (<TT><FONT FACE="Courier">PH, point, rowint</FONT></TT>,
...) the controls of the ZM box remains active even though a watch is
displayed in the window. Activating the ZM 1 command when the zoom is
already on will recompute the small vignette display, as if the <TT><FONT FACE="Courier">catch
spectrum</FONT></TT> button had been clicked.<BR><TT><FONT FACE="Courier">ZOOM</FONT></TT>
is a command which permits to define a zoom window on the data-set in
a non graphical way. It is perfectly possible to define a zoom
window, even if there is no graphic open. Many commands (<TT><FONT FACE="Courier">LINEFIT</FONT></TT>,
<TT><FONT FACE="Courier">PEAK</FONT></TT>, etc..) only apply within
the current zoom window</P>
<H3><A NAME="Heading1150"></A><B>The Point stack : MONOPOINT,
POINT_PUSH, POINT_POP, POINT_CLEAR, point_dump, point</B></H3>
<P><TT><FONT FACE="Courier">MONOPOINT</FONT></TT> will permit just
one click on the data-set. Gifa will be blocked until the user
actually clicks on the graphic screen. The coordinate of the click is
stored on the top of a special stack (the <I>point stack</I>). This
stack is handled with the 4 commands : <TT><FONT FACE="Courier">POINT_INPUT</FONT></TT>
<TT><FONT FACE="Courier">POINT_PUSH</FONT></TT>, <TT><FONT FACE="Courier">POINT_POP</FONT></TT>,
<TT><FONT FACE="Courier">POINT_CLEAR</FONT></TT>. The content of this
stack is used as default values by many commands (<TT><FONT FACE="Courier">ZOOM,
EVALN, BCORR, POINT-&gt;PK</FONT></TT>, etc...) In macro programming
the content of the point stack is examined through the variables
<TT><FONT FACE="Courier">$POINTX[] $POINTY[]</FONT></TT> and <TT><FONT FACE="Courier">$NPOINT</FONT></TT>.
The macro <TT><FONT FACE="Courier">point_dump</FONT></TT> prints out
the state of this stack. <BR>The macro <TT><FONT FACE="Courier">point</FONT></TT>
permits to interact with the data, it is based on <TT><FONT FACE="Courier">MONOPOINT</FONT></TT>.
With <TT><FONT FACE="Courier">point</FONT></TT>, the point stack is
cleared, and all the clicked points are stored into the stack. Point
is exited by clicking on the data-set with the right-most button of
the mouse.</P>
<H3><A NAME="Heading1154"></A><B>SHOW</B></H3>
<P>permits to put some information in the graphic window. <TT><FONT FACE="Courier">SHOW</FONT></TT>
takes an argument : <TT><FONT FACE="Courier">CURRENT</FONT></TT> will
show the current data-set as-is; <TT><FONT FACE="Courier">FT</FONT></TT>
will show the FT of it. Other parameters are available, see below or
the alphabetic list.</P>
<H3><A NAME="Heading1157"></A><B>FREEZE</B></H3>
<P>freezes the current graphic window making it inactive, and create
a new one equivalent to the previous. This is useful for comparing
data.</P>
<H3><A NAME="Heading1160"></A><B>REF, UNREF, REFMACRO</B></H3>
<P>These command are mostly used when fine tuning the display during
macro programming.<BR><TT><FONT FACE="Courier">REF</FONT></TT> will
force a new computing of the display, as if a display command had
been issued. This is useful for cleaning the spectrum after a point
or whatever command, it can be called from the <TT><FONT FACE="Courier">ZM</FONT></TT>
box. <TT><FONT FACE="Courier">UNREF</FONT></TT> realizes just the
inverse, i.e. display will not be refreshed, even if the previous
commands did modify the data-set. <TT><FONT FACE="Courier">UNREF</FONT></TT>
is useful in macro for fine control on the display. It is active only
for the commands that precedes it in the command line / macro ; so it
is usually the last command issued. <BR><TT><FONT FACE="Courier">REFMACRO</FONT></TT>
controls whether display will be done at the end of each command line
within macro. Default value of 0 means no refreshing during macro
execution, which permits much faster execution. If you write
interactive macros with graphical display, you should set <TT><FONT FACE="Courier">REFMACRO</FONT></TT>
to 1. It is often useful to change <TT><FONT FACE="Courier">REFMACRO</FONT></TT>
several time within a macro.</P>
<HR>
<P ALIGN=CENTER STYLE="margin-bottom: 0cm"><A HREF="basic-SPECTRAL.html"><IMG SRC="images/prev.gif" NAME="Image5" ALT="Previous " ALIGN=BOTTOM WIDTH=30 HEIGHT=29 BORDER=0></A> 
  <A HREF="basic-PLOTTING.html"><IMG SRC="images/next.gif" NAME="Image6" ALT="Next " ALIGN=BOTTOM WIDTH=30 HEIGHT=29 BORDER=0></A> 
  <A HREF="basic-Title.html"><IMG SRC="images/first.gif" NAME="Image7" ALT="Title Page " ALIGN=BOTTOM WIDTH=30 HEIGHT=29 BORDER=0></A> 
  <A HREF="basic-Contents.html"><IMG SRC="images/contents.gif" NAME="Image8" ALT="Contents " ALIGN=BOTTOM WIDTH=30 HEIGHT=29 BORDER=0></A> 
</P>
</BODY>
</HTML>